{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageRepliesCountButton as DefaultMessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageTimestamp as DefaultTimestamp } from './MessageTimestamp';\nimport { useReactionClick } from './hooks';\nimport { PinIndicator as DefaultPinIndicator, ErrorIcon, ReactionIcon, ThreadIcon } from './icons';\nimport { QuotedMessage as DefaultQuotedMessage } from './QuotedMessage';\nimport { areMessageUIPropsEqual, MESSAGE_ACTIONS, showMessageActionsBox } from './utils';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MessageActions } from '../MessageActions';\nimport { EditMessageForm as DefaultEditMessageForm, MessageInput } from '../MessageInput';\nimport { ReactionSelector as DefaultReactionSelector, SimpleReactionsList as DefaultReactionsList } from '../Reactions';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useMessageContext } from '../../context/MessageContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText as defaultRenderText, isOnlyEmojis } from '../../utils';\n\nvar MessageLivestreamWithContext = function (props) {\n  var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n\n  var clearEditingState = props.clearEditingState,\n      editing = props.editing,\n      groupStyles = props.groupStyles,\n      handleAction = props.handleAction,\n      handleOpenThread = props.handleOpenThread,\n      handleRetry = props.handleRetry,\n      initialMessage = props.initialMessage,\n      isReactionEnabled = props.isReactionEnabled,\n      message = props.message,\n      messageWrapperRef = props.messageWrapperRef,\n      onMentionsClickMessage = props.onMentionsClickMessage,\n      onMentionsHoverMessage = props.onMentionsHoverMessage,\n      onReactionListClick = props.onReactionListClick,\n      onUserClick = props.onUserClick,\n      onUserHover = props.onUserHover,\n      reactionSelectorRef = props.reactionSelectorRef,\n      _k = props.renderText,\n      renderText = _k === void 0 ? defaultRenderText : _k,\n      showDetailedReactions = props.showDetailedReactions,\n      unsafeHTML = props.unsafeHTML;\n  var _l = useComponentContext().QuotedMessage,\n      QuotedMessage = _l === void 0 ? DefaultQuotedMessage : _l;\n\n  var _m = useComponentContext(),\n      Attachment = _m.Attachment,\n      _o = _m.Avatar,\n      Avatar = _o === void 0 ? DefaultAvatar : _o,\n      _p = _m.EditMessageInput,\n      EditMessageInput = _p === void 0 ? DefaultEditMessageForm : _p,\n      _q = _m.MessageDeleted,\n      MessageDeleted = _q === void 0 ? DefaultMessageDeleted : _q,\n      _r = _m.MessageRepliesCountButton,\n      MessageRepliesCountButton = _r === void 0 ? DefaultMessageRepliesCountButton : _r,\n      _s = _m.PinIndicator,\n      PinIndicator = _s === void 0 ? DefaultPinIndicator : _s,\n      _t = _m.ReactionsList,\n      ReactionsList = _t === void 0 ? DefaultReactionsList : _t,\n      _u = _m.ReactionSelector,\n      ReactionSelector = _u === void 0 ? DefaultReactionSelector : _u;\n\n  var _v = useTranslationContext(),\n      t = _v.t,\n      userLanguage = _v.userLanguage;\n\n  var messageTextToRender = ((_a = message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || message.text;\n  var messageText = useMemo(function () {\n    return renderText(messageTextToRender, message.mentioned_users);\n  }, [message.mentioned_users, messageTextToRender]);\n  var firstGroupStyle = groupStyles ? groupStyles[0] : 'single';\n\n  if (message.customType === 'message.date') {\n    return null;\n  }\n\n  if (message.deleted_at) {\n    return React.createElement(MessageDeleted, {\n      message: message\n    });\n  }\n\n  if (editing) {\n    return React.createElement(\"div\", {\n      className: \"str-chat__message-team str-chat__message-team--\" + firstGroupStyle + \" str-chat__message-team--editing\",\n      \"data-testid\": 'message-livestream-edit'\n    }, (firstGroupStyle === 'top' || firstGroupStyle === 'single') && React.createElement(\"div\", {\n      className: 'str-chat__message-team-meta'\n    }, React.createElement(Avatar, {\n      image: (_b = message.user) === null || _b === void 0 ? void 0 : _b.image,\n      name: ((_c = message.user) === null || _c === void 0 ? void 0 : _c.name) || ((_d = message.user) === null || _d === void 0 ? void 0 : _d.id),\n      onClick: onUserClick,\n      onMouseOver: onUserHover,\n      size: 40\n    })), React.createElement(MessageInput, {\n      clearEditingState: clearEditingState,\n      Input: EditMessageInput,\n      message: message\n    }));\n  }\n\n  return React.createElement(React.Fragment, null, message.pinned && React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-pin-indicator'\n  }, React.createElement(PinIndicator, {\n    message: message,\n    t: t\n  })), React.createElement(\"div\", {\n    className: \"str-chat__message-livestream str-chat__message-livestream--\" + firstGroupStyle + \" str-chat__message-livestream--\" + message.type + \" str-chat__message-livestream--\" + message.status + \" \" + (initialMessage ? 'str-chat__message-livestream--initial-message' : '') + \" \" + (message.pinned ? 'pinned-message' : ''),\n    \"data-testid\": 'message-livestream',\n    ref: messageWrapperRef\n  }, showDetailedReactions && isReactionEnabled && React.createElement(ReactionSelector, {\n    ref: reactionSelectorRef\n  }), React.createElement(MessageLivestreamActions, {\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick\n  }), React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-left'\n  }, React.createElement(Avatar, {\n    image: (_e = message.user) === null || _e === void 0 ? void 0 : _e.image,\n    name: ((_f = message.user) === null || _f === void 0 ? void 0 : _f.name) || ((_g = message.user) === null || _g === void 0 ? void 0 : _g.id),\n    onClick: onUserClick,\n    onMouseOver: onUserHover,\n    size: 30\n  })), React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-right'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-content'\n  }, React.createElement(\"div\", {\n    className: 'str-chat__message-livestream-author'\n  }, React.createElement(\"strong\", null, ((_h = message.user) === null || _h === void 0 ? void 0 : _h.name) || ((_j = message.user) === null || _j === void 0 ? void 0 : _j.id)), message.type === 'error' && React.createElement(\"div\", {\n    className: 'str-chat__message-team-error-header'\n  }, t('Only visible to you'))), React.createElement(\"div\", {\n    className: isOnlyEmojis(message.text) ? 'str-chat__message-livestream-text--is-emoji' : '',\n    \"data-testid\": 'message-livestream-text',\n    onClick: onMentionsClickMessage,\n    onMouseOver: onMentionsHoverMessage\n  }, message.quoted_message && React.createElement(\"div\", {\n    className: 'livestream-quoted-message'\n  }, React.createElement(QuotedMessage, null)), message.type !== 'error' && message.status !== 'failed' && !unsafeHTML && messageText, message.type !== 'error' && message.status !== 'failed' && unsafeHTML && !!message.html && React.createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: message.html\n    }\n  }), message.type === 'error' && !message.command && React.createElement(\"p\", {\n    \"data-testid\": 'message-livestream-error'\n  }, React.createElement(ErrorIcon, null), message.text), message.type === 'error' && message.command && React.createElement(\"p\", {\n    \"data-testid\": 'message-livestream-command-error'\n  }, React.createElement(ErrorIcon, null), React.createElement(\"strong\", null, \"/\", message.command), \" is not a valid command\"), message.status === 'failed' && React.createElement(\"p\", {\n    onClick: message.errorStatusCode !== 403 ? function () {\n      return handleRetry(message);\n    } : undefined\n  }, React.createElement(ErrorIcon, null), message.errorStatusCode !== 403 ? t('Message Failed · Click to try again') : t('Message Failed · Unauthorized'))), message.attachments && React.createElement(Attachment, {\n    actionHandler: handleAction,\n    attachments: message.attachments\n  }), isReactionEnabled && React.createElement(ReactionsList, null), !initialMessage && React.createElement(MessageRepliesCountButton, {\n    onClick: handleOpenThread,\n    reply_count: message.reply_count\n  })))));\n};\n\nvar MessageLivestreamActions = function (props) {\n  var messageWrapperRef = props.messageWrapperRef,\n      onReactionListClick = props.onReactionListClick;\n  var _a = useComponentContext().MessageTimestamp,\n      MessageTimestamp = _a === void 0 ? DefaultTimestamp : _a;\n\n  var _b = useMessageContext(),\n      getMessageActions = _b.getMessageActions,\n      handleOpenThread = _b.handleOpenThread,\n      initialMessage = _b.initialMessage,\n      message = _b.message,\n      threadList = _b.threadList;\n\n  var _c = useState(false),\n      actionsBoxOpen = _c[0],\n      setActionsBoxOpen = _c[1];\n\n  var hideOptions = useCallback(function () {\n    return setActionsBoxOpen(false);\n  }, []);\n  var messageDeletedAt = !!message.deleted_at;\n  var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n  var messageActions = getMessageActions();\n  var showActionsBox = showMessageActionsBox(messageActions);\n  var shouldShowReactions = messageActions.indexOf(MESSAGE_ACTIONS.react) > -1;\n  var shouldShowReplies = messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1 && !threadList;\n  useEffect(function () {\n    if (messageWrapper) {\n      messageWrapper.addEventListener('mouseleave', hideOptions);\n    }\n\n    return function () {\n      if (messageWrapper) {\n        messageWrapper.removeEventListener('mouseleave', hideOptions);\n      }\n    };\n  }, [messageWrapper, hideOptions]);\n  useEffect(function () {\n    if (messageDeletedAt) {\n      document.removeEventListener('click', hideOptions);\n    }\n  }, [messageDeletedAt, hideOptions]);\n  useEffect(function () {\n    if (actionsBoxOpen) {\n      document.addEventListener('click', hideOptions);\n    } else {\n      document.removeEventListener('click', hideOptions);\n    }\n\n    return function () {\n      document.removeEventListener('click', hideOptions);\n    };\n  }, [actionsBoxOpen, hideOptions]);\n\n  if (initialMessage || !message || message.type === 'error' || message.type === 'system' || message.type === 'ephemeral' || message.status === 'failed' || message.status === 'sending') {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"str-chat__message-livestream-actions\",\n    \"data-testid\": 'message-livestream-actions'\n  }, React.createElement(MessageTimestamp, {\n    customClass: 'str-chat__message-livestream-time'\n  }), shouldShowReactions && React.createElement(\"span\", {\n    \"data-testid\": 'message-livestream-reactions-action',\n    onClick: onReactionListClick\n  }, React.createElement(\"span\", null, React.createElement(ReactionIcon, null))), shouldShowReplies && React.createElement(\"span\", {\n    \"data-testid\": 'message-livestream-thread-action',\n    onClick: handleOpenThread\n  }, React.createElement(ThreadIcon, null)), showActionsBox && React.createElement(MessageActions, {\n    inline: true\n  }));\n};\n\nvar MemoizedMessageLivestream = React.memo(MessageLivestreamWithContext, areMessageUIPropsEqual);\n/**\n * @deprecated - This UI component will be removed in the next major release.\n *\n * Handles the rendering of a message and depends on the Message component for all the logic.\n * Implements the look and feel for a livestream use case.\n */\n\nexport var MessageLivestream = function (props) {\n  var messageContext = useMessageContext();\n  var messageWrapperRef = useRef(null);\n  var reactionSelectorRef = useRef(null);\n  var message = props.message || messageContext.message;\n\n  var _a = useReactionClick(message, reactionSelectorRef, messageWrapperRef),\n      isReactionEnabled = _a.isReactionEnabled,\n      onReactionListClick = _a.onReactionListClick,\n      showDetailedReactions = _a.showDetailedReactions;\n\n  return React.createElement(MemoizedMessageLivestream, __assign({}, messageContext, {\n    isReactionEnabled: isReactionEnabled,\n    messageWrapperRef: messageWrapperRef,\n    onReactionListClick: onReactionListClick,\n    reactionSelectorRef: reactionSelectorRef,\n    showDetailedReactions: showDetailedReactions\n  }, props));\n};","map":{"version":3,"sources":["/Users/zeeshanpatel/flow/node_modules/stream-chat-react/dist/components/Message/MessageLivestream.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","useCallback","useEffect","useMemo","useRef","useState","MessageDeleted","DefaultMessageDeleted","MessageRepliesCountButton","DefaultMessageRepliesCountButton","MessageTimestamp","DefaultTimestamp","useReactionClick","PinIndicator","DefaultPinIndicator","ErrorIcon","ReactionIcon","ThreadIcon","QuotedMessage","DefaultQuotedMessage","areMessageUIPropsEqual","MESSAGE_ACTIONS","showMessageActionsBox","Avatar","DefaultAvatar","MessageActions","EditMessageForm","DefaultEditMessageForm","MessageInput","ReactionSelector","DefaultReactionSelector","SimpleReactionsList","DefaultReactionsList","useComponentContext","useMessageContext","useTranslationContext","renderText","defaultRenderText","isOnlyEmojis","MessageLivestreamWithContext","props","_a","_b","_c","_d","_e","_f","_g","_h","_j","clearEditingState","editing","groupStyles","handleAction","handleOpenThread","handleRetry","initialMessage","isReactionEnabled","message","messageWrapperRef","onMentionsClickMessage","onMentionsHoverMessage","onReactionListClick","onUserClick","onUserHover","reactionSelectorRef","_k","showDetailedReactions","unsafeHTML","_l","_m","Attachment","_o","_p","EditMessageInput","_q","_r","_s","_t","ReactionsList","_u","_v","userLanguage","messageTextToRender","i18n","text","messageText","mentioned_users","firstGroupStyle","customType","deleted_at","createElement","className","image","user","name","id","onClick","onMouseOver","size","Input","Fragment","pinned","type","status","ref","MessageLivestreamActions","quoted_message","html","dangerouslySetInnerHTML","__html","command","errorStatusCode","undefined","attachments","actionHandler","reply_count","getMessageActions","threadList","actionsBoxOpen","setActionsBoxOpen","hideOptions","messageDeletedAt","messageWrapper","current","messageActions","showActionsBox","shouldShowReactions","indexOf","react","shouldShowReplies","reply","addEventListener","removeEventListener","document","customClass","inline","MemoizedMessageLivestream","memo","MessageLivestream","messageContext"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { MessageDeleted as DefaultMessageDeleted } from './MessageDeleted';\nimport { MessageRepliesCountButton as DefaultMessageRepliesCountButton } from './MessageRepliesCountButton';\nimport { MessageTimestamp as DefaultTimestamp } from './MessageTimestamp';\nimport { useReactionClick } from './hooks';\nimport { PinIndicator as DefaultPinIndicator, ErrorIcon, ReactionIcon, ThreadIcon } from './icons';\nimport { QuotedMessage as DefaultQuotedMessage } from './QuotedMessage';\nimport { areMessageUIPropsEqual, MESSAGE_ACTIONS, showMessageActionsBox } from './utils';\nimport { Avatar as DefaultAvatar } from '../Avatar';\nimport { MessageActions } from '../MessageActions';\nimport { EditMessageForm as DefaultEditMessageForm, MessageInput } from '../MessageInput';\nimport { ReactionSelector as DefaultReactionSelector, SimpleReactionsList as DefaultReactionsList, } from '../Reactions';\nimport { useComponentContext } from '../../context/ComponentContext';\nimport { useMessageContext } from '../../context/MessageContext';\nimport { useTranslationContext } from '../../context/TranslationContext';\nimport { renderText as defaultRenderText, isOnlyEmojis } from '../../utils';\nvar MessageLivestreamWithContext = function (props) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    var clearEditingState = props.clearEditingState, editing = props.editing, groupStyles = props.groupStyles, handleAction = props.handleAction, handleOpenThread = props.handleOpenThread, handleRetry = props.handleRetry, initialMessage = props.initialMessage, isReactionEnabled = props.isReactionEnabled, message = props.message, messageWrapperRef = props.messageWrapperRef, onMentionsClickMessage = props.onMentionsClickMessage, onMentionsHoverMessage = props.onMentionsHoverMessage, onReactionListClick = props.onReactionListClick, onUserClick = props.onUserClick, onUserHover = props.onUserHover, reactionSelectorRef = props.reactionSelectorRef, _k = props.renderText, renderText = _k === void 0 ? defaultRenderText : _k, showDetailedReactions = props.showDetailedReactions, unsafeHTML = props.unsafeHTML;\n    var _l = useComponentContext().QuotedMessage, QuotedMessage = _l === void 0 ? DefaultQuotedMessage : _l;\n    var _m = useComponentContext(), Attachment = _m.Attachment, _o = _m.Avatar, Avatar = _o === void 0 ? DefaultAvatar : _o, _p = _m.EditMessageInput, EditMessageInput = _p === void 0 ? DefaultEditMessageForm : _p, _q = _m.MessageDeleted, MessageDeleted = _q === void 0 ? DefaultMessageDeleted : _q, _r = _m.MessageRepliesCountButton, MessageRepliesCountButton = _r === void 0 ? DefaultMessageRepliesCountButton : _r, _s = _m.PinIndicator, PinIndicator = _s === void 0 ? DefaultPinIndicator : _s, _t = _m.ReactionsList, ReactionsList = _t === void 0 ? DefaultReactionsList : _t, _u = _m.ReactionSelector, ReactionSelector = _u === void 0 ? DefaultReactionSelector : _u;\n    var _v = useTranslationContext(), t = _v.t, userLanguage = _v.userLanguage;\n    var messageTextToRender = ((_a = message.i18n) === null || _a === void 0 ? void 0 : _a[userLanguage + \"_text\"]) || message.text;\n    var messageText = useMemo(function () { return renderText(messageTextToRender, message.mentioned_users); }, [\n        message.mentioned_users,\n        messageTextToRender,\n    ]);\n    var firstGroupStyle = groupStyles ? groupStyles[0] : 'single';\n    if (message.customType === 'message.date') {\n        return null;\n    }\n    if (message.deleted_at) {\n        return React.createElement(MessageDeleted, { message: message });\n    }\n    if (editing) {\n        return (React.createElement(\"div\", { className: \"str-chat__message-team str-chat__message-team--\" + firstGroupStyle + \" str-chat__message-team--editing\", \"data-testid\": 'message-livestream-edit' },\n            (firstGroupStyle === 'top' || firstGroupStyle === 'single') && (React.createElement(\"div\", { className: 'str-chat__message-team-meta' },\n                React.createElement(Avatar, { image: (_b = message.user) === null || _b === void 0 ? void 0 : _b.image, name: ((_c = message.user) === null || _c === void 0 ? void 0 : _c.name) || ((_d = message.user) === null || _d === void 0 ? void 0 : _d.id), onClick: onUserClick, onMouseOver: onUserHover, size: 40 }))),\n            React.createElement(MessageInput, { clearEditingState: clearEditingState, Input: EditMessageInput, message: message })));\n    }\n    return (React.createElement(React.Fragment, null,\n        message.pinned && (React.createElement(\"div\", { className: 'str-chat__message-livestream-pin-indicator' },\n            React.createElement(PinIndicator, { message: message, t: t }))),\n        React.createElement(\"div\", { className: \"str-chat__message-livestream str-chat__message-livestream--\" + firstGroupStyle + \" str-chat__message-livestream--\" + message.type + \" str-chat__message-livestream--\" + message.status + \" \" + (initialMessage ? 'str-chat__message-livestream--initial-message' : '') + \" \" + (message.pinned ? 'pinned-message' : ''), \"data-testid\": 'message-livestream', ref: messageWrapperRef },\n            showDetailedReactions && isReactionEnabled && (React.createElement(ReactionSelector, { ref: reactionSelectorRef })),\n            React.createElement(MessageLivestreamActions, { messageWrapperRef: messageWrapperRef, onReactionListClick: onReactionListClick }),\n            React.createElement(\"div\", { className: 'str-chat__message-livestream-left' },\n                React.createElement(Avatar, { image: (_e = message.user) === null || _e === void 0 ? void 0 : _e.image, name: ((_f = message.user) === null || _f === void 0 ? void 0 : _f.name) || ((_g = message.user) === null || _g === void 0 ? void 0 : _g.id), onClick: onUserClick, onMouseOver: onUserHover, size: 30 })),\n            React.createElement(\"div\", { className: 'str-chat__message-livestream-right' },\n                React.createElement(\"div\", { className: 'str-chat__message-livestream-content' },\n                    React.createElement(\"div\", { className: 'str-chat__message-livestream-author' },\n                        React.createElement(\"strong\", null, ((_h = message.user) === null || _h === void 0 ? void 0 : _h.name) || ((_j = message.user) === null || _j === void 0 ? void 0 : _j.id)),\n                        message.type === 'error' && (React.createElement(\"div\", { className: 'str-chat__message-team-error-header' }, t('Only visible to you')))),\n                    React.createElement(\"div\", { className: isOnlyEmojis(message.text) ? 'str-chat__message-livestream-text--is-emoji' : '', \"data-testid\": 'message-livestream-text', onClick: onMentionsClickMessage, onMouseOver: onMentionsHoverMessage },\n                        message.quoted_message && (React.createElement(\"div\", { className: 'livestream-quoted-message' },\n                            React.createElement(QuotedMessage, null))),\n                        message.type !== 'error' &&\n                            message.status !== 'failed' &&\n                            !unsafeHTML &&\n                            messageText,\n                        message.type !== 'error' &&\n                            message.status !== 'failed' &&\n                            unsafeHTML &&\n                            !!message.html && React.createElement(\"div\", { dangerouslySetInnerHTML: { __html: message.html } }),\n                        message.type === 'error' && !message.command && (React.createElement(\"p\", { \"data-testid\": 'message-livestream-error' },\n                            React.createElement(ErrorIcon, null),\n                            message.text)),\n                        message.type === 'error' && message.command && (React.createElement(\"p\", { \"data-testid\": 'message-livestream-command-error' },\n                            React.createElement(ErrorIcon, null),\n                            React.createElement(\"strong\", null,\n                                \"/\",\n                                message.command),\n                            \" is not a valid command\")),\n                        message.status === 'failed' && (React.createElement(\"p\", { onClick: message.errorStatusCode !== 403 ? function () { return handleRetry(message); } : undefined },\n                            React.createElement(ErrorIcon, null),\n                            message.errorStatusCode !== 403\n                                ? t('Message Failed · Click to try again')\n                                : t('Message Failed · Unauthorized')))),\n                    message.attachments && (React.createElement(Attachment, { actionHandler: handleAction, attachments: message.attachments })),\n                    isReactionEnabled && React.createElement(ReactionsList, null),\n                    !initialMessage && (React.createElement(MessageRepliesCountButton, { onClick: handleOpenThread, reply_count: message.reply_count })))))));\n};\nvar MessageLivestreamActions = function (props) {\n    var messageWrapperRef = props.messageWrapperRef, onReactionListClick = props.onReactionListClick;\n    var _a = useComponentContext().MessageTimestamp, MessageTimestamp = _a === void 0 ? DefaultTimestamp : _a;\n    var _b = useMessageContext(), getMessageActions = _b.getMessageActions, handleOpenThread = _b.handleOpenThread, initialMessage = _b.initialMessage, message = _b.message, threadList = _b.threadList;\n    var _c = useState(false), actionsBoxOpen = _c[0], setActionsBoxOpen = _c[1];\n    var hideOptions = useCallback(function () { return setActionsBoxOpen(false); }, []);\n    var messageDeletedAt = !!message.deleted_at;\n    var messageWrapper = messageWrapperRef === null || messageWrapperRef === void 0 ? void 0 : messageWrapperRef.current;\n    var messageActions = getMessageActions();\n    var showActionsBox = showMessageActionsBox(messageActions);\n    var shouldShowReactions = messageActions.indexOf(MESSAGE_ACTIONS.react) > -1;\n    var shouldShowReplies = messageActions.indexOf(MESSAGE_ACTIONS.reply) > -1 && !threadList;\n    useEffect(function () {\n        if (messageWrapper) {\n            messageWrapper.addEventListener('mouseleave', hideOptions);\n        }\n        return function () {\n            if (messageWrapper) {\n                messageWrapper.removeEventListener('mouseleave', hideOptions);\n            }\n        };\n    }, [messageWrapper, hideOptions]);\n    useEffect(function () {\n        if (messageDeletedAt) {\n            document.removeEventListener('click', hideOptions);\n        }\n    }, [messageDeletedAt, hideOptions]);\n    useEffect(function () {\n        if (actionsBoxOpen) {\n            document.addEventListener('click', hideOptions);\n        }\n        else {\n            document.removeEventListener('click', hideOptions);\n        }\n        return function () {\n            document.removeEventListener('click', hideOptions);\n        };\n    }, [actionsBoxOpen, hideOptions]);\n    if (initialMessage ||\n        !message ||\n        message.type === 'error' ||\n        message.type === 'system' ||\n        message.type === 'ephemeral' ||\n        message.status === 'failed' ||\n        message.status === 'sending') {\n        return null;\n    }\n    return (React.createElement(\"div\", { className: \"str-chat__message-livestream-actions\", \"data-testid\": 'message-livestream-actions' },\n        React.createElement(MessageTimestamp, { customClass: 'str-chat__message-livestream-time' }),\n        shouldShowReactions && (React.createElement(\"span\", { \"data-testid\": 'message-livestream-reactions-action', onClick: onReactionListClick },\n            React.createElement(\"span\", null,\n                React.createElement(ReactionIcon, null)))),\n        shouldShowReplies && (React.createElement(\"span\", { \"data-testid\": 'message-livestream-thread-action', onClick: handleOpenThread },\n            React.createElement(ThreadIcon, null))),\n        showActionsBox && React.createElement(MessageActions, { inline: true })));\n};\nvar MemoizedMessageLivestream = React.memo(MessageLivestreamWithContext, areMessageUIPropsEqual);\n/**\n * @deprecated - This UI component will be removed in the next major release.\n *\n * Handles the rendering of a message and depends on the Message component for all the logic.\n * Implements the look and feel for a livestream use case.\n */\nexport var MessageLivestream = function (props) {\n    var messageContext = useMessageContext();\n    var messageWrapperRef = useRef(null);\n    var reactionSelectorRef = useRef(null);\n    var message = props.message || messageContext.message;\n    var _a = useReactionClick(message, reactionSelectorRef, messageWrapperRef), isReactionEnabled = _a.isReactionEnabled, onReactionListClick = _a.onReactionListClick, showDetailedReactions = _a.showDetailedReactions;\n    return (React.createElement(MemoizedMessageLivestream, __assign({}, messageContext, { isReactionEnabled: isReactionEnabled, messageWrapperRef: messageWrapperRef, onReactionListClick: onReactionListClick, reactionSelectorRef: reactionSelectorRef, showDetailedReactions: showDetailedReactions }, props)));\n};\n"]},"metadata":{},"sourceType":"module"}