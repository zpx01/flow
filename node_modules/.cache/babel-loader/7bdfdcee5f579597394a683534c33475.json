{"ast":null,"code":"import { CommandItem } from '../../CommandItem/CommandItem';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useCommandTrigger = function () {\n  var _a, _b;\n\n  var channel = useChannelStateContext().channel;\n  var commands = (_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.commands;\n  return {\n    component: CommandItem,\n    dataProvider: function (query, text, onReady) {\n      if (text.indexOf('/') !== 0 || !commands) {\n        return [];\n      }\n\n      var selectedCommands = commands.filter(function (command) {\n        var _a;\n\n        return ((_a = command.name) === null || _a === void 0 ? void 0 : _a.indexOf(query)) !== -1;\n      }); // sort alphabetically unless the you're matching the first char\n\n      selectedCommands.sort(function (a, b) {\n        var _a, _b;\n\n        var nameA = (_a = a.name) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n        var nameB = (_b = b.name) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n\n        if ((nameA === null || nameA === void 0 ? void 0 : nameA.indexOf(query)) === 0) {\n          nameA = \"0\" + nameA;\n        }\n\n        if ((nameB === null || nameB === void 0 ? void 0 : nameB.indexOf(query)) === 0) {\n          nameB = \"0\" + nameB;\n        } // Should confirm possible null / undefined when TS is fully implemented\n\n\n        if (nameA != null && nameB != null) {\n          if (nameA < nameB) {\n            return -1;\n          }\n\n          if (nameA > nameB) {\n            return 1;\n          }\n        }\n\n        return 0;\n      });\n      var result = selectedCommands.slice(0, 10);\n      if (onReady) onReady(result.filter(function (result) {\n        return result.name !== undefined;\n      }), query);\n      return result;\n    },\n    output: function (entity) {\n      return {\n        caretPosition: 'next',\n        key: entity.name,\n        text: \"/\" + entity.name\n      };\n    }\n  };\n};","map":{"version":3,"sources":["/Users/zeeshanpatel/flow/node_modules/stream-chat-react/dist/components/MessageInput/hooks/useCommandTrigger.js"],"names":["CommandItem","useChannelStateContext","useCommandTrigger","_a","_b","channel","commands","getConfig","call","component","dataProvider","query","text","onReady","indexOf","selectedCommands","filter","command","name","sort","a","b","nameA","toLowerCase","nameB","result","slice","undefined","output","entity","caretPosition","key"],"mappings":"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","sourcesContent":["import { CommandItem } from '../../CommandItem/CommandItem';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var useCommandTrigger = function () {\n    var _a, _b;\n    var channel = useChannelStateContext().channel;\n    var commands = (_b = (_a = channel === null || channel === void 0 ? void 0 : channel.getConfig) === null || _a === void 0 ? void 0 : _a.call(channel)) === null || _b === void 0 ? void 0 : _b.commands;\n    return {\n        component: CommandItem,\n        dataProvider: function (query, text, onReady) {\n            if (text.indexOf('/') !== 0 || !commands) {\n                return [];\n            }\n            var selectedCommands = commands.filter(function (command) { var _a; return ((_a = command.name) === null || _a === void 0 ? void 0 : _a.indexOf(query)) !== -1; });\n            // sort alphabetically unless the you're matching the first char\n            selectedCommands.sort(function (a, b) {\n                var _a, _b;\n                var nameA = (_a = a.name) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n                var nameB = (_b = b.name) === null || _b === void 0 ? void 0 : _b.toLowerCase();\n                if ((nameA === null || nameA === void 0 ? void 0 : nameA.indexOf(query)) === 0) {\n                    nameA = \"0\" + nameA;\n                }\n                if ((nameB === null || nameB === void 0 ? void 0 : nameB.indexOf(query)) === 0) {\n                    nameB = \"0\" + nameB;\n                }\n                // Should confirm possible null / undefined when TS is fully implemented\n                if (nameA != null && nameB != null) {\n                    if (nameA < nameB) {\n                        return -1;\n                    }\n                    if (nameA > nameB) {\n                        return 1;\n                    }\n                }\n                return 0;\n            });\n            var result = selectedCommands.slice(0, 10);\n            if (onReady)\n                onReady(result.filter(function (result) { return result.name !== undefined; }), query);\n            return result;\n        },\n        output: function (entity) { return ({\n            caretPosition: 'next',\n            key: entity.name,\n            text: \"/\" + entity.name,\n        }); },\n    };\n};\n"]},"metadata":{},"sourceType":"module"}