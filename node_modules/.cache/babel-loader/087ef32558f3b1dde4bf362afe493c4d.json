{"ast":null,"code":"\"use strict\";\n\nvar __makeTemplateObject = this && this.__makeTemplateObject || function (cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar core_1 = require(\"@emotion/core\");\n\nvar js_brand_1 = require(\"@giphy/js-brand\");\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar useDebounce_1 = __importDefault(require(\"react-use/lib/useDebounce\"));\n\nvar context_1 = require(\"./context\");\n\nvar search_bar_channel_1 = __importDefault(require(\"./search-bar-channel\"));\n\nvar search_button_1 = __importDefault(require(\"./search-button\"));\n\nvar theme_1 = __importStar(require(\"./theme\"));\n\nfunction usePrevious(value) {\n  var ref = react_1.useRef(value);\n  react_1.useEffect(function () {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nvar SEARCH_DEBOUNCE = 500;\nvar Container = theme_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    display: flex;\\n    background: white;\\n    \", \"\\n\"], [\"\\n    display: flex;\\n    background: white;\\n    \", \"\\n\"])), function (props) {\n  return theme_1.getSize(props.theme);\n});\nvar Input = theme_1.default.input(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n    background: \", \";\\n    box-sizing: border-box;\\n    border: 0;\\n    appearance: none;\\n    font-weight: normal;\\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\\n    outline: 0;\\n    font-size: 15px;\\n    padding: 0 10px;\\n    border-radius: 0;\\n    text-overflow: ellipsis;\\n    color: \", \";\\n    &::placeholder {\\n        color: \", \";\\n    }\\n    min-width: 150px;\\n    flex: 1;\\n    \", \"\\n\"], [\"\\n    background: \", \";\\n    box-sizing: border-box;\\n    border: 0;\\n    appearance: none;\\n    font-weight: normal;\\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\\n    outline: 0;\\n    font-size: 15px;\\n    padding: 0 10px;\\n    border-radius: 0;\\n    text-overflow: ellipsis;\\n    color: \", \";\\n    &::placeholder {\\n        color: \", \";\\n    }\\n    min-width: 150px;\\n    flex: 1;\\n    \", \"\\n\"])), function (props) {\n  return props.theme.mode === 'dark' ? js_brand_1.giphyCharcoal : js_brand_1.giphyWhite;\n}, function (props) {\n  return props.theme.mode === 'dark' ? js_brand_1.giphyWhite : js_brand_1.giphyBlack;\n}, function (props) {\n  return props.theme.mode === 'dark' ? js_brand_1.giphyLightGrey : js_brand_1.giphyLightGrey;\n}, function (props) {\n  return props.isUsernameSearch && core_1.css(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            color: \", \";\\n        \"], [\"\\n            color: \", \";\\n        \"])), js_brand_1.giphyIndigo);\n});\n\nvar SearchBar = function (_a) {\n  var className = _a.className,\n      _b = _a.placeholder,\n      placeholder = _b === void 0 ? \"Search GIPHY\" : _b,\n      _c = _a.clear,\n      clear = _c === void 0 ? false : _c,\n      autoFocus = _a.autoFocus;\n\n  var _d = react_1.useContext(context_1.SearchContext),\n      setSearch = _d.setSearch,\n      activeChannel = _d.activeChannel,\n      setActiveChannel = _d.setActiveChannel,\n      term = _d.term,\n      channelSearch = _d.channelSearch; // debounce local input\n\n\n  var _e = react_1.useState(term),\n      debouncedTerm = _e[0],\n      setDebouncedInput = _e[1]; // used to see if the last term was a '' before clearing\n\n\n  var lastTerm = usePrevious(debouncedTerm); // set the term when it changes\n\n  useDebounce_1.default(function () {\n    return setSearch(debouncedTerm);\n  }, SEARCH_DEBOUNCE, [debouncedTerm]); // used only to focus the input\n\n  var inputRef = react_1.useRef(null); // we'll use this to see when we went from no channel to channel\n\n  var previousActiveChannel = usePrevious(activeChannel);\n  react_1.useEffect(function () {\n    var _a;\n\n    if (autoFocus) {\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }, [autoFocus]);\n  react_1.useEffect(function () {\n    var _a; // if we know have a channel, focus and clear the input\n    // so the user can search the channel\n\n\n    if (activeChannel && !previousActiveChannel) {\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      setDebouncedInput('');\n    }\n  }, [debouncedTerm, activeChannel]); // a pill could have been clicked, update our local term state\n\n  react_1.useEffect(function () {\n    setDebouncedInput(term);\n  }, [term]);\n\n  var _f = react_1.useState(clear),\n      isCleared = _f[0],\n      setCleared = _f[1];\n\n  react_1.useEffect(function () {\n    setCleared(clear);\n  }, [clear]); // key ups to clear the active channel\n\n  var onKeyUp = function (e) {\n    var key = e.keyCode || e.key;\n\n    switch (key) {\n      case 8: // backspace\n\n      case 'Backspace':\n        if (lastTerm === '') {\n          setActiveChannel(undefined);\n        }\n\n        break;\n\n      case 27: // esc\n\n      case \"Escape\":\n        // esc\n        setActiveChannel(undefined);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return react_1.default.createElement(Container, {\n    className: [SearchBar.className, className].join(' ')\n  }, react_1.default.createElement(search_bar_channel_1.default, null), react_1.default.createElement(Input, {\n    isUsernameSearch: !!channelSearch,\n    onChange: function (_a) {\n      var value = _a.target.value;\n\n      if (!isCleared || value !== '') {\n        setCleared(false);\n        setDebouncedInput(value);\n      }\n    },\n    value: isCleared ? '' : debouncedTerm,\n    placeholder: activeChannel ? \"Search \" + activeChannel.display_name : placeholder,\n    autoCapitalize: \"off\",\n    autoCorrect: \"off\",\n    autoComplete: \"off\",\n    ref: inputRef,\n    onKeyUp: onKeyUp\n  }), react_1.default.createElement(search_button_1.default, null));\n};\n\nSearchBar.className = 'giphy-search-bar';\nexports.default = SearchBar;\nvar templateObject_1, templateObject_2, templateObject_3;","map":{"version":3,"sources":["../../../src/components/search-bar/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@emotion/core\");\nvar js_brand_1 = require(\"@giphy/js-brand\");\nvar react_1 = __importStar(require(\"react\"));\nvar useDebounce_1 = __importDefault(require(\"react-use/lib/useDebounce\"));\nvar context_1 = require(\"./context\");\nvar search_bar_channel_1 = __importDefault(require(\"./search-bar-channel\"));\nvar search_button_1 = __importDefault(require(\"./search-button\"));\nvar theme_1 = __importStar(require(\"./theme\"));\nfunction usePrevious(value) {\n    var ref = react_1.useRef(value);\n    react_1.useEffect(function () {\n        ref.current = value;\n    });\n    return ref.current;\n}\nvar SEARCH_DEBOUNCE = 500;\nvar Container = theme_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n    display: flex;\\n    background: white;\\n    \", \"\\n\"], [\"\\n    display: flex;\\n    background: white;\\n    \", \"\\n\"])), function (props) { return theme_1.getSize(props.theme); });\nvar Input = theme_1.default.input(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n    background: \", \";\\n    box-sizing: border-box;\\n    border: 0;\\n    appearance: none;\\n    font-weight: normal;\\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\\n    outline: 0;\\n    font-size: 15px;\\n    padding: 0 10px;\\n    border-radius: 0;\\n    text-overflow: ellipsis;\\n    color: \", \";\\n    &::placeholder {\\n        color: \", \";\\n    }\\n    min-width: 150px;\\n    flex: 1;\\n    \", \"\\n\"], [\"\\n    background: \", \";\\n    box-sizing: border-box;\\n    border: 0;\\n    appearance: none;\\n    font-weight: normal;\\n    font-family: interface, Helvetica Neue, helvetica, sans-serif;\\n    outline: 0;\\n    font-size: 15px;\\n    padding: 0 10px;\\n    border-radius: 0;\\n    text-overflow: ellipsis;\\n    color: \", \";\\n    &::placeholder {\\n        color: \", \";\\n    }\\n    min-width: 150px;\\n    flex: 1;\\n    \",\n    \"\\n\"])), function (props) { return (props.theme.mode === 'dark' ? js_brand_1.giphyCharcoal : js_brand_1.giphyWhite); }, function (props) { return (props.theme.mode === 'dark' ? js_brand_1.giphyWhite : js_brand_1.giphyBlack); }, function (props) { return (props.theme.mode === 'dark' ? js_brand_1.giphyLightGrey : js_brand_1.giphyLightGrey); }, function (props) {\n    return props.isUsernameSearch && core_1.css(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n            color: \", \";\\n        \"], [\"\\n            color: \", \";\\n        \"])), js_brand_1.giphyIndigo);\n});\nvar SearchBar = function (_a) {\n    var className = _a.className, _b = _a.placeholder, placeholder = _b === void 0 ? \"Search GIPHY\" : _b, _c = _a.clear, clear = _c === void 0 ? false : _c, autoFocus = _a.autoFocus;\n    var _d = react_1.useContext(context_1.SearchContext), setSearch = _d.setSearch, activeChannel = _d.activeChannel, setActiveChannel = _d.setActiveChannel, term = _d.term, channelSearch = _d.channelSearch;\n    // debounce local input\n    var _e = react_1.useState(term), debouncedTerm = _e[0], setDebouncedInput = _e[1];\n    // used to see if the last term was a '' before clearing\n    var lastTerm = usePrevious(debouncedTerm);\n    // set the term when it changes\n    useDebounce_1.default(function () { return setSearch(debouncedTerm); }, SEARCH_DEBOUNCE, [debouncedTerm]);\n    // used only to focus the input\n    var inputRef = react_1.useRef(null);\n    // we'll use this to see when we went from no channel to channel\n    var previousActiveChannel = usePrevious(activeChannel);\n    react_1.useEffect(function () {\n        var _a;\n        if (autoFocus) {\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    }, [autoFocus]);\n    react_1.useEffect(function () {\n        var _a;\n        // if we know have a channel, focus and clear the input\n        // so the user can search the channel\n        if (activeChannel && !previousActiveChannel) {\n            (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n            setDebouncedInput('');\n        }\n    }, [debouncedTerm, activeChannel]);\n    // a pill could have been clicked, update our local term state\n    react_1.useEffect(function () {\n        setDebouncedInput(term);\n    }, [term]);\n    var _f = react_1.useState(clear), isCleared = _f[0], setCleared = _f[1];\n    react_1.useEffect(function () {\n        setCleared(clear);\n    }, [clear]);\n    // key ups to clear the active channel\n    var onKeyUp = function (e) {\n        var key = e.keyCode || e.key;\n        switch (key) {\n            case 8: // backspace\n            case 'Backspace':\n                if (lastTerm === '') {\n                    setActiveChannel(undefined);\n                }\n                break;\n            case 27: // esc\n            case \"Escape\": // esc\n                setActiveChannel(undefined);\n                break;\n            default:\n                break;\n        }\n    };\n    return (react_1.default.createElement(Container, { className: [SearchBar.className, className].join(' ') },\n        react_1.default.createElement(search_bar_channel_1.default, null),\n        react_1.default.createElement(Input, { isUsernameSearch: !!channelSearch, onChange: function (_a) {\n                var value = _a.target.value;\n                if (!isCleared || value !== '') {\n                    setCleared(false);\n                    setDebouncedInput(value);\n                }\n            }, value: isCleared ? '' : debouncedTerm, placeholder: activeChannel ? \"Search \" + activeChannel.display_name : placeholder, autoCapitalize: \"off\", autoCorrect: \"off\", autoComplete: \"off\", ref: inputRef, onKeyUp: onKeyUp }),\n        react_1.default.createElement(search_button_1.default, null)));\n};\nSearchBar.className = 'giphy-search-bar';\nexports.default = SearchBar;\nvar templateObject_1, templateObject_2, templateObject_3;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}