{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar BubbleGroup_1 = require(\"../BubbleGroup\");\n\nvar ChatBubble_1 = require(\"../ChatBubble\");\n\nvar ChatInput_1 = require(\"../ChatInput\");\n\nvar Message_1 = require(\"../Message\");\n\nvar styles_1 = require(\"./styles\");\n\nvar ChatFeed = function (_super) {\n  __extends(ChatFeed, _super);\n\n  function ChatFeed(props) {\n    return _super.call(this, props) || this;\n  }\n\n  ChatFeed.prototype.componentDidMount = function () {\n    this.scrollToBottom();\n  };\n\n  ChatFeed.prototype.componentDidUpdate = function () {\n    this.scrollToBottom();\n  };\n\n  ChatFeed.prototype.scrollToBottom = function () {\n    var scrollHeight = this.chat.scrollHeight;\n    var height = this.chat.clientHeight;\n    var maxScrollTop = scrollHeight - height;\n    this.chat.scrollTop = maxScrollTop > 0 ? maxScrollTop : 0;\n  };\n\n  ChatFeed.prototype.renderMessages = function (messages) {\n    var _a = this.props,\n        isTyping = _a.isTyping,\n        bubbleStyles = _a.bubbleStyles,\n        chatBubble = _a.chatBubble,\n        showSenderName = _a.showSenderName;\n    var ChatBubble = chatBubble || ChatBubble_1.default;\n    var group = [];\n    var messageNodes = messages.map(function (message, index) {\n      group.push(message);\n\n      if (index === messages.length - 1 || messages[index + 1].id !== message.id) {\n        var messageGroup = group;\n        group = [];\n        return React.createElement(BubbleGroup_1.default, {\n          key: index,\n          messages: messageGroup,\n          id: message.id,\n          showSenderName: showSenderName,\n          chatBubble: ChatBubble,\n          bubbleStyles: bubbleStyles\n        });\n      }\n\n      return null;\n    });\n\n    if (isTyping) {\n      messageNodes.push(React.createElement(\"div\", {\n        key: \"isTyping\",\n        style: __assign({}, styles_1.default.chatbubbleWrapper)\n      }, React.createElement(ChatBubble, {\n        message: new Message_1.default({\n          id: 1,\n          message: '...',\n          senderName: ''\n        }),\n        bubbleStyles: bubbleStyles\n      })));\n    }\n\n    return messageNodes;\n  };\n\n  ChatFeed.prototype.render = function () {\n    var _this = this;\n\n    var inputField = this.props.hasInputField && React.createElement(ChatInput_1.default, null);\n    var maxHeight = this.props.maxHeight;\n    return React.createElement(\"div\", {\n      id: \"chat-panel\",\n      style: styles_1.default.chatPanel\n    }, React.createElement(\"div\", {\n      ref: function (c) {\n        _this.chat = c;\n      },\n      className: \"chat-history\",\n      style: __assign({}, styles_1.default.chatHistory, {\n        maxHeight: maxHeight\n      })\n    }, React.createElement(\"div\", {\n      className: \"chat-messages\"\n    }, this.renderMessages(this.props.messages))), inputField);\n  };\n\n  return ChatFeed;\n}(React.Component);\n\nexports.default = ChatFeed;","map":{"version":3,"sources":["../../src/ChatFeed/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = require(\"react\");\nvar BubbleGroup_1 = require(\"../BubbleGroup\");\nvar ChatBubble_1 = require(\"../ChatBubble\");\nvar ChatInput_1 = require(\"../ChatInput\");\nvar Message_1 = require(\"../Message\");\nvar styles_1 = require(\"./styles\");\nvar ChatFeed = (function (_super) {\n    __extends(ChatFeed, _super);\n    function ChatFeed(props) {\n        return _super.call(this, props) || this;\n    }\n    ChatFeed.prototype.componentDidMount = function () {\n        this.scrollToBottom();\n    };\n    ChatFeed.prototype.componentDidUpdate = function () {\n        this.scrollToBottom();\n    };\n    ChatFeed.prototype.scrollToBottom = function () {\n        var scrollHeight = this.chat.scrollHeight;\n        var height = this.chat.clientHeight;\n        var maxScrollTop = scrollHeight - height;\n        this.chat.scrollTop = maxScrollTop > 0 ? maxScrollTop : 0;\n    };\n    ChatFeed.prototype.renderMessages = function (messages) {\n        var _a = this.props, isTyping = _a.isTyping, bubbleStyles = _a.bubbleStyles, chatBubble = _a.chatBubble, showSenderName = _a.showSenderName;\n        var ChatBubble = chatBubble || ChatBubble_1.default;\n        var group = [];\n        var messageNodes = messages.map(function (message, index) {\n            group.push(message);\n            if (index === messages.length - 1 || messages[index + 1].id !== message.id) {\n                var messageGroup = group;\n                group = [];\n                return (React.createElement(BubbleGroup_1.default, { key: index, messages: messageGroup, id: message.id, showSenderName: showSenderName, chatBubble: ChatBubble, bubbleStyles: bubbleStyles }));\n            }\n            return null;\n        });\n        if (isTyping) {\n            messageNodes.push(React.createElement(\"div\", { key: \"isTyping\", style: __assign({}, styles_1.default.chatbubbleWrapper) },\n                React.createElement(ChatBubble, { message: new Message_1.default({ id: 1, message: '...', senderName: '' }), bubbleStyles: bubbleStyles })));\n        }\n        return messageNodes;\n    };\n    ChatFeed.prototype.render = function () {\n        var _this = this;\n        var inputField = this.props.hasInputField && React.createElement(ChatInput_1.default, null);\n        var maxHeight = this.props.maxHeight;\n        return (React.createElement(\"div\", { id: \"chat-panel\", style: styles_1.default.chatPanel },\n            React.createElement(\"div\", { ref: function (c) {\n                    _this.chat = c;\n                }, className: \"chat-history\", style: __assign({}, styles_1.default.chatHistory, { maxHeight: maxHeight }) },\n                React.createElement(\"div\", { className: \"chat-messages\" }, this.renderMessages(this.props.messages))),\n            inputField));\n    };\n    return ChatFeed;\n}(React.Component));\nexports.default = ChatFeed;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}